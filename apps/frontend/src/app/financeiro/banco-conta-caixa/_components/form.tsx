"use client"`n`nimport { useForm } from "react-hook-form";`nimport { zodResolver } from "@hookform/resolvers/zod";`nimport { useAction } from "next-safe-action/hooks";`nimport { useRouter } from "next/navigation";`nimport {`n  bancoContaCaixaSchema,`n  BancoContaCaixa,`n  tipoContaOptions,`n} from "@/types/schemas/banco-conta-caixa";`nimport { createBancoContaCaixa, updateBancoContaCaixa } from "@/actions/banco-conta-caixa";`nimport {`n  Form,`n  FormControl,`n  FormField,`n  FormItem,`n  FormLabel,`n  FormMessage,`n} from "@/components/ui/form";`nimport { Input } from "@/components/ui/input";`nimport {`n  Select,`n  SelectContent,`n  SelectItem,`n  SelectTrigger,`n  SelectValue,`n} from "@/components/ui/select";`nimport { Button } from "@/components/ui/button";`nimport { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";`nimport { toast } from "sonner";`n`ninterface BancoContaCaixaFormProps {`n  initialData?: BancoContaCaixa;`n}`n`nexport function BancoContaCaixaForm({ initialData }: BancoContaCaixaFormProps) {`n  const router = useRouter();`n  const form = useForm<BancoContaCaixa>({`n    resolver: zodResolver(bancoContaCaixaSchema),`n    defaultValues: initialData || {`n      nome: "",`n      numero: "",`n      digito: "",`n      tipo: "C",`n      idBancoAgencia: 1, // Defaulting for pilot`n      descricao: "",`n    },`n  });`n`n  const { execute: executeCreate, isExecuting: isCreating } = useAction(createBancoContaCaixa, {`n    onSuccess: () => {`n      // toast.success("Banco criado com sucesso!");`n      router.push("/financeiro/banco-conta-caixa");`n    },`n    onError: () => {`n      // toast.error("Erro ao criar banco");`n    },`n  });`n`n  const { execute: executeUpdate, isExecuting: isUpdating } = useAction(updateBancoContaCaixa, {`n    onSuccess: () => {`n      // toast.success("Banco atualizado com sucesso!");`n      router.push("/financeiro/banco-conta-caixa");`n    },`n    onError: () => {`n      // toast.error("Erro ao atualizar banco");`n    },`n  });`n`n  const onSubmit = (values: BancoContaCaixa) => {`n    if (initialData?.id) {`n      executeUpdate({ id: initialData.id, ...values });`n    } else {`n      executeCreate(values);`n    }`n  };`n`n  const isLoading = isCreating || isUpdating;`n`n  return (`n    <Card>`n      <CardHeader>`n        <CardTitle>{initialData ? "Editar Banco" : "Novo Banco"}</CardTitle>`n      </CardHeader>`n      <CardContent>`n        <Form {...form}>`n          <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">`n            <div className="grid grid-cols-2 gap-4">`n              <FormField`n                control={form.control}`n                name="nome"`n                render={({ field }) => (`n                  <FormItem>`n                    <FormLabel>Nome</FormLabel>`n                    <FormControl>`n                      <Input placeholder="Nome da conta" {...field} />`n                    </FormControl>`n                    <FormMessage />`n                  </FormItem>`n                )}`n              />`n              <FormField`n                control={form.control}`n                name="tipo"`n                render={({ field }) => (`n                  <FormItem>`n                    <FormLabel>Tipo</FormLabel>`n                    <Select`n                      onValueChange={field.onChange}`n                      defaultValue={field.value}`n                    >`n                      <FormControl>`n                        <SelectTrigger>`n                          <SelectValue placeholder="Selecione o tipo" />`n                        </SelectTrigger>`n                      </FormControl>`n                      <SelectContent>`n                        {tipoContaOptions.map((option) => (`n                          <SelectItem key={option.value} value={option.value}>`n                            {option.label}`n                          </SelectItem>`n                        ))}`n                      </SelectContent>`n                    </Select>`n                    <FormMessage />`n                  </FormItem>`n                )}`n              />`n            </div>`n            <div className="grid grid-cols-3 gap-4">`n              <FormField`n                control={form.control}`n                name="numero"`n                render={({ field }) => (`n                  <FormItem>`n                    <FormLabel>Número</FormLabel>`n                    <FormControl>`n                      <Input placeholder="12345" {...field} />`n                    </FormControl>`n                    <FormMessage />`n                  </FormItem>`n                )}`n              />`n              <FormField`n                control={form.control}`n                name="digito"`n                render={({ field }) => (`n                  <FormItem>`n                    <FormLabel>Dígito</FormLabel>`n                    <FormControl>`n                      <Input placeholder="X" maxLength={2} {...field} />`n                    </FormControl>`n                    <FormMessage />`n                  </FormItem>`n                )}`n              />`n              <FormField`n                control={form.control}`n                name="idBancoAgencia"`n                render={({ field }) => (`n                  <FormItem>`n                    <FormLabel>Agência (ID)</FormLabel>`n                    <FormControl>`n                      <Input`n                        type="number"`n                        placeholder="1"`n                        {...field}`n                        onChange={(e) => field.onChange(Number(e.target.value))}`n                      />`n                    </FormControl>`n                    <FormMessage />`n                  </FormItem>`n                )}`n              />`n            </div>`n            <FormField`n              control={form.control}`n              name="descricao"`n              render={({ field }) => (`n                <FormItem>`n                  <FormLabel>Descrição</FormLabel>`n                  <FormControl>`n                    <Input placeholder="Descrição opcional" {...field} />`n                  </FormControl>`n                  <FormMessage />`n                </FormItem>`n              )}`n            />`n            <div className="flex justify-end space-x-2">`n              <Button`n                variant="outline"`n                type="button"`n                onClick={() => router.back()}`n                disabled={isLoading}`n              >`n                Cancelar`n              </Button>`n              <Button type="submit" disabled={isLoading}>`n                {isLoading ? "Salvando..." : "Salvar"}`n              </Button>`n            </div>`n          </form>`n        </Form>`n      </CardContent>`n    </Card>`n  );`n}
